{"version":3,"file":"AdminDashboard-Cql7eXNE.js","sources":["../../node_modules/@mui/icons-material/ArrowBack.js","../../src/pages/AdminDashboard.tsx"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z\"\n}), 'ArrowBack');","import React, { useState, useEffect } from 'react';\r\nimport { Box, Typography, Tabs, Tab, Paper, CircularProgress, AppBar, Toolbar, IconButton, Button } from '@mui/material';\r\nimport { fetchAdminUsers, fetchAdminProducts, fetchAdminLogs, fetchAdminSettings } from '../services/apiService';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\n\r\nconst tabLabels = ['Users', 'Products', 'Logs', 'Settings'];\r\n\r\nconst AdminDashboard: React.FC = () => {\r\n  const [tab, setTab] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [users, setUsers] = useState<any[]>([]);\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [logs, setLogs] = useState<any[]>([]);\r\n  const [settings, setSettings] = useState<any>({});\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setError('');\r\n    setLoading(true);\r\n    const fetchData = async () => {\r\n      try {\r\n        if (tab === 0) {\r\n          const res = await fetchAdminUsers();\r\n          setUsers(res.data || []);\r\n        } else if (tab === 1) {\r\n          const res = await fetchAdminProducts();\r\n          setProducts(res.data || []);\r\n        } else if (tab === 2) {\r\n          const res = await fetchAdminLogs();\r\n          setLogs(res.data || []);\r\n        } else if (tab === 3) {\r\n          const res = await fetchAdminSettings();\r\n          setSettings(res.data || {});\r\n        }\r\n      } catch (err: any) {\r\n        setError(err?.response?.data?.message || err.message || 'Failed to fetch data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [tab]);\r\n\r\n  return (\r\n    <Box sx={{ minHeight: '100vh', bgcolor: '#f5f6fa' }}>\r\n      <AppBar position=\"static\" color=\"primary\" sx={{ mb: 2 }}>\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" color=\"inherit\" onClick={() => navigate('/')}>\r\n            <ArrowBackIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" sx={{ flexGrow: 1, textAlign: 'center', fontWeight: 'bold' }}>\r\n            Admin Dashboard\r\n          </Typography>\r\n          <Button color=\"inherit\" onClick={() => { localStorage.removeItem('token'); navigate('/admin'); }}>Logout</Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Paper sx={{ maxWidth: 600, mx: 'auto', mt: 2, borderRadius: 3, p: 2 }}>\r\n        <Tabs\r\n          value={tab}\r\n          onChange={(_, v) => setTab(v)}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n        >\r\n          {tabLabels.map((label, idx) => (\r\n            <Tab key={label} label={label} />\r\n          ))}\r\n        </Tabs>\r\n        <Box sx={{ mt: 3 }}>\r\n          {loading ? (\r\n            <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 200 }}>\r\n              <CircularProgress />\r\n            </Box>\r\n          ) : error ? (\r\n            <Typography color=\"error\" align=\"center\">{error}</Typography>\r\n          ) : (\r\n            <>\r\n              {tab === 0 && (\r\n                <Box>\r\n                  <Typography variant=\"h6\" mb={2}>All Users</Typography>\r\n                  {users.length === 0 ? <Typography>No users found.</Typography> : (\r\n                    <Box sx={{ maxHeight: 400, overflowY: 'auto' }}>\r\n                      {users.map((u: any) => (\r\n                        <Paper key={u._id} sx={{ p: 2, mb: 1, borderRadius: 2 }}>\r\n                          <Typography fontWeight=\"bold\">{u.name} ({u.role})</Typography>\r\n                          <Typography variant=\"body2\">Email: {u.email}</Typography>\r\n                          <Typography variant=\"body2\">Phone: {u.phone}</Typography>\r\n                        </Paper>\r\n                      ))}\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              )}\r\n              {tab === 1 && (\r\n                <Box>\r\n                  <Typography variant=\"h6\" mb={2}>All Products</Typography>\r\n                  {products.length === 0 ? <Typography>No products found.</Typography> : (\r\n                    <Box sx={{ maxHeight: 400, overflowY: 'auto' }}>\r\n                      {products.map((p: any) => (\r\n                        <Paper key={p._id} sx={{ p: 2, mb: 1, borderRadius: 2 }}>\r\n                          <Typography fontWeight=\"bold\">{p.name}</Typography>\r\n                          <Typography variant=\"body2\">Farmer: {p.farmer?.name || p.farmer}</Typography>\r\n                          <Typography variant=\"body2\">Price: â‚¹{p.price} / {p.unit}</Typography>\r\n                          <Typography variant=\"body2\">Available: {p.availableQuantity}</Typography>\r\n                        </Paper>\r\n                      ))}\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              )}\r\n              {tab === 2 && (\r\n                <Box>\r\n                  <Typography variant=\"h6\" mb={2}>Activity Logs</Typography>\r\n                  {logs.length === 0 ? <Typography>No logs found.</Typography> : (\r\n                    <Box sx={{ maxHeight: 400, overflowY: 'auto' }}>\r\n                      {logs.map((log: any, idx: number) => (\r\n                        <Paper key={idx} sx={{ p: 2, mb: 1, borderRadius: 2 }}>\r\n                          <Typography fontWeight=\"bold\">{log.action}</Typography>\r\n                          <Typography variant=\"body2\">User: {log.user}</Typography>\r\n                          <Typography variant=\"body2\">Resource: {log.resource}</Typography>\r\n                          <Typography variant=\"body2\">At: {new Date(log.timestamp || log.createdAt).toLocaleString()}</Typography>\r\n                        </Paper>\r\n                      ))}\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              )}\r\n              {tab === 3 && (\r\n                <Box>\r\n                  <Typography variant=\"h6\" mb={2}>Settings</Typography>\r\n                  <pre style={{ fontSize: 14, background: '#f8f8f8', padding: 8, borderRadius: 4 }}>{JSON.stringify(settings, null, 2)}</pre>\r\n                </Box>\r\n              )}\r\n            </>\r\n          )}\r\n        </Box>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard; "],"names":["_interopRequireDefault","require$$0","ArrowBack","_createSvgIcon","_jsxRuntime","require$$2","tabLabels","AdminDashboard","tab","setTab","useState","loading","setLoading","error","setError","users","setUsers","products","setProducts","logs","setLogs","settings","setSettings","navigate","useNavigate","useEffect","res","fetchAdminUsers","fetchAdminProducts","fetchAdminLogs","fetchAdminSettings","err","_b","_a","jsxs","Box","jsx","AppBar","Toolbar","IconButton","ArrowBackIcon","Typography","Button","Paper","Tabs","_","v","label","idx","Tab","CircularProgress","Fragment","u","p","log"],"mappings":"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","x_google_ignoreList":[0]}